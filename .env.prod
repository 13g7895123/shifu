# ========================================
# LuckyGo 生產環境配置檔案
# ========================================
# 此檔案用於生產環境部署
# 使用方式：./production.sh
# ========================================

# ========================================
# Node 環境
# ========================================
NODE_ENV=production

# ========================================
# 對外 Port 配置（可自訂）
# ========================================
# 前端 HTTP port（預設 80）
FRONTEND_PORT=80

# 前端 HTTPS port（啟用 SSL 時使用，預設 443）
FRONTEND_PORT_SSL=443

# 後端 API port（預設 3001）
BACKEND_PORT=3001

# Redis port（預設 6379，建議不對外開放）
REDIS_PORT=6379

# Redis Commander port（僅 debug 模式，預設 8081）
REDIS_COMMANDER_PORT=8081

# ========================================
# Backend API 配置
# ========================================
# 後端 API 的完整路徑（前端會使用此設定呼叫後端）
# 請根據實際部署環境修改：
# - 本機測試: http://localhost:3001
# - 生產環境: https://your-domain.com 或 https://api.your-domain.com
BACKEND_API_URL=http://localhost:3001

# 網域名稱（用於動態替換）
DOMAIN_NAME=localhost:3001

# ========================================
# Frontend 配置
# ========================================
# 前端網址（用於 CORS 設定）
FRONTEND_URL=http://localhost:80

# ========================================
# 安全性配置（生產環境必須修改！）
# ========================================
# JWT 密鑰（請使用 openssl rand -hex 32 產生強隨機密鑰）
# 範例產生指令：openssl rand -hex 32
JWT_SECRET=CHANGE-THIS-USE-openssl-rand-hex-32-TO-GENERATE

# Session 密鑰（請使用 openssl rand -hex 32 產生強隨機密鑰）
SESSION_SECRET=CHANGE-THIS-USE-openssl-rand-hex-32-TO-GENERATE

# Redis 密碼（請設定強密碼）
REDIS_PASSWORD=CHANGE-THIS-TO-STRONG-PASSWORD

# ========================================
# 應用程式設定
# ========================================
APP_NAME=luckygo
APP_VERSION=1.0.0

# Repository 類型：'memory' 或 'sqlite'
# 生產環境建議使用 'sqlite' 以確保資料持久化
REPOSITORY_TYPE=sqlite

# ========================================
# Redis 配置
# ========================================
# Redis 連線 URL（Docker 內部網路）
REDIS_URL=redis://redis:6379

# ========================================
# SSL/TLS 配置（HTTPS）
# ========================================
# 是否啟用 SSL（設定為 true 則啟動 Nginx HTTPS 服務）
ENABLE_SSL=false

# SSL 憑證路徑（相對於專案根目錄）
SSL_CERT_PATH=./ssl/cert.pem
SSL_KEY_PATH=./ssl/key.pem

# ========================================
# 資源限制配置（可選）
# ========================================
# Backend CPU 限制（預設 2 核心）
BACKEND_CPU_LIMIT=2
BACKEND_MEMORY_LIMIT=2G

# Backend CPU 保留（預設 1 核心）
BACKEND_CPU_RESERVATION=1
BACKEND_MEMORY_RESERVATION=1G

# Redis CPU 限制
REDIS_CPU_LIMIT=1
REDIS_MEMORY_LIMIT=1G

# ========================================
# 備份配置（可選）
# ========================================
# 備份目錄
BACKUP_DIR=./backups

# 是否在部署前自動備份
AUTO_BACKUP=true

# ========================================
# 監控配置（可選）
# ========================================
# 是否啟用資源監控
ENABLE_MONITORING=false

# ========================================
# 注意事項
# ========================================
# 1. 生產環境部署前，請務必修改所有 CHANGE-THIS 開頭的值
# 2. JWT_SECRET 和 SESSION_SECRET 必須使用強隨機密鑰
# 3. REDIS_PASSWORD 必須設定強密碼
# 4. BACKEND_API_URL 必須設定為實際的網域或 IP
# 5. 如需啟用 HTTPS，請先準備 SSL 憑證並設定 ENABLE_SSL=true
# 6. Redis port 建議不要對外開放，僅供內部服務使用
# 7. Redis Commander 僅在 debug 模式下啟動，生產環境預設關閉
# 8. 建議定期備份 SQLite 資料庫和 Redis 資料
# 9. 可根據伺服器效能調整資源限制參數
# 10. 首次部署建議先在測試環境驗證所有設定
